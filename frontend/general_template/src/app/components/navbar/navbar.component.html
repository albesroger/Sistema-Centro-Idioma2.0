<nav
  #desplegable
  class="h-12 bg-white/80 border-b border-gray-200/60 dark:bg-slate-700 dark:border-slate-900/40 shadow-sm"
>
  <div class="flex flex-wrap items-center justify-between mx-auto px-3 h-full">
    <a
      href="#"
      class="flex items-center space-x-3 rtl:space-x-reverse group"
      routerLink="/homePage"
    >
      <div
        class="p-1 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg group-hover:scale-105 transition-transform duration-200"
      >
        <img
          src="https://flowbite.com/docs/images/logo.svg"
          class="h-5"
          alt="Flowbite Logo"
        />
      </div>
      <span
        class="self-center text-lg font-semibold bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-indigo-700 dark:from-blue-400 dark:to-indigo-300"
        >CENID</span
      >
    </a>

    <div>
      <!-- muÃ±eco-->
      <button
        #userButton
        class="relative p-1.5 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50"
        (click)="toggleArrow()"
        aria-label="User menu"
      >
        <div class="relative">
          <div
            class="absolute inset-0 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300"
          ></div>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="relative h-6 w-6 text-gray-600 group-hover:text-white dark:text-gray-300 dark:group-hover:text-white transition-colors duration-200"
          >
            <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2" />
            <circle cx="12" cy="7" r="4" />
          </svg>
        </div>

        @if(isOpen()){
        <!--Desplegable-->
        <div
          #divEl
          class="fixed z-50 mt-2 w-48 rounded-xl bg-white/95 backdrop-blur-lg shadow-xl ring-1 ring-black/5 focus:outline-none dark:bg-gray-800/95 dark:ring-white/10 overflow-hidden transition-all duration-200 transform origin-top-right"
          [ngStyle]="calculateDropdownPosition()"
          [class.scale-95]="!isOpen()"
          [class.opacity-0]="!isOpen()"
          [class.scale-100]="isOpen()"
          [class.opacity-100]="isOpen()"
        >
          @if(mytoken){
          <!--Perfil-->

          <div class="py-1">
            <a
              routerLink="/profile"
              class="flex items-center w-full px-4 py-2.5 text-sm font-medium text-gray-700 hover:bg-gray-50/80 dark:text-gray-200 dark:hover:bg-gray-700/80 transition-colors duration-150"
            >
              <svg
                class="mr-3 h-5 w-5 text-gray-400"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 20 20"
                fill="currentColor"
                aria-hidden="true"
              >
                <path
                  fill-rule="evenodd"
                  d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z"
                  clip-rule="evenodd"
                />
              </svg>
              <span>Your Profile</span>
            </a>
          </div>

          <!--Logout-->
          <div class="py-1">
            <button
              (click)="logOut()"
              class="flex w-full items-center px-4 py-2.5 text-sm font-medium text-red-600 hover:bg-red-50/80 dark:text-red-400 dark:hover:bg-red-900/30 transition-colors duration-150"
            >
              <svg
                class="mr-3 h-5 w-5 text-red-500"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 20 20"
                fill="currentColor"
                aria-hidden="true"
              >
                <path
                  fill-rule="evenodd"
                  d="M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z"
                  clip-rule="evenodd"
                />
              </svg>
              <span>Sign out</span>
            </button>
          </div>

          }@else{
          <div class="space-y-1 px-2 py-1">
            <a
              routerLink="/login"
              class="group flex w-full items-center rounded-lg px-4 py-2.5 text-sm font-medium text-gray-700 hover:bg-gray-50/80 dark:text-gray-200 dark:hover:bg-gray-700/80 transition-colors duration-150"
            >
              <svg
                class="mr-3 h-5 w-5 text-gray-400 group-hover:text-gray-500 dark:group-hover:text-gray-300"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 20 20"
                fill="currentColor"
                aria-hidden="true"
              >
                <path
                  fill-rule="evenodd"
                  d="M10 2a5 5 0 00-5 5v2a2 2 0 00-2 2v5a2 2 0 002 2h10a2 2 0 002-2v-5a2 2 0 00-2-2H9.999V7a3 3 0 015.995-.18l.005.18v2a1 1 0 002 0V7a5 5 0 00-5-5z"
                  clip-rule="evenodd"
                />
              </svg>
              <span>Sign in</span>
            </a>
            <a
              routerLink="/singIn"
              class="group flex w-full items-center rounded-lg px-4 py-2.5 text-sm font-medium text-gray-700 hover:bg-gray-50/80 dark:text-gray-200 dark:hover:bg-gray-700/80 transition-colors duration-150"
            >
              <svg
                class="mr-3 h-5 w-5 text-gray-400 group-hover:text-gray-500 dark:group-hover:text-gray-300"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 20 20"
                fill="currentColor"
                aria-hidden="true"
              >
                <path
                  d="M8 9a3 3 0 100-6 3 3 0 000 6zM8 11a6 6 0 016 6H2a6 6 0 016-6z"
                />
              </svg>
              <span>Create account</span>
            </a>
          </div>
          }
        </div>
        }
      </button>
      <!--theme-->
      <button
        class="p-1.5 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50"
        aria-label="Toggle theme"
      >
        <div class="relative">
          <div
            class="absolute inset-0 bg-gradient-to-br from-amber-400 to-orange-500 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300"
          ></div>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="relative h-6 w-6 text-gray-600 group-hover:text-white dark:text-gray-300 dark:group-hover:text-white transition-colors duration-200"
          >
            <path d="M12 2v2" />
            <path
              d="M14.837 16.385a6 6 0 1 1-7.223-7.222c.624-.147.97.66.715 1.248a4 4 0 0 0 5.26 5.259c.589-.255 1.396.09 1.248.715"
            />
            <path d="M16 12a4 4 0 0 0-4-4" />
            <path d="m19 5-1.256 1.256" />
            <path d="M20 12h2" />
          </svg>
        </div>
      </button>
    </div>
  </div>
</nav>
